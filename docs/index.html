<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .content-section {
            min-height: 100vh;
            padding-top: 6rem; /* Adjust for fixed navbar height */
            padding-bottom: 2rem;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- Navigation Bar -->
    <nav class="bg-gray-800/80 backdrop-blur-md fixed top-0 left-0 right-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <span class="font-bold text-xl text-indigo-400">MyPortfolio</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#about" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">About Me</a>
                        <a href="#gallery" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Gallery</a>
                        <a href="#github" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">GitHub</a>
                        <a href="#shaders" class="text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium">GLSL Shaders</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                        <span class="sr-only">Open main menu</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#about" class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">About Me</a>
                <a href="#gallery" class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Gallery</a>
                <a href="#github" class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">GitHub</a>
                <a href="#shaders" class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">GLSL Shaders</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- About Me Section -->
        <section id="about" class="content-section flex items-center justify-center bg-gray-900">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <img src="https://placehold.co/150x150/4F46E5/FFFFFF?text=ME" alt="Your Name" class="w-40 h-40 rounded-full mx-auto mb-8 border-4 border-indigo-400 shadow-lg">
                <h1 class="text-4xl md:text-6xl font-bold tracking-tight text-white mb-4">Hello, I'm [Your Name]</h1>
                <p class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto">
                    I am a passionate developer and creative technologist with a love for computer graphics, interactive experiences, and beautiful design. This is my corner of the internet to showcase my work and experiments.
                </p>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="content-section flex items-center justify-center bg-gray-800">
            <div class="text-center">
                <h2 class="text-3xl md:text-5xl font-bold text-white mb-4">Gallery</h2>
                <p class="text-lg text-gray-400">This section is under construction. Check back soon!</p>
            </div>
        </section>

        <!-- GitHub Section -->
        <section id="github" class="content-section bg-gray-900">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-5xl font-bold text-white mb-2">My GitHub Repositories</h2>
                    <p class="text-lg text-gray-400">A live feed of my public projects on GitHub.</p>
                </div>
                <div id="repo-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- GitHub repos will be dynamically inserted here -->
                </div>
            </div>
        </section>


        <!-- Shaders Section -->
        <section id="shaders" class="content-section flex flex-col items-center justify-center bg-gray-800">
            <div class="w-full max-w-5xl text-center mb-8 px-4">
                 <h2 class="text-3xl md:text-5xl font-bold text-white mb-2">GLSL Shader Showcase</h2>
                 <p class="text-lg text-gray-400">An interactive cube demonstrating a custom shader.</p>
            </div>
            <div id="shader-container" class="w-full h-[60vh] max-w-5xl rounded-lg shadow-2xl bg-black"></div>
        </section>
    </main>

    <!-- Floating Logo -->
    <img src="images/logo.png" 
         alt="Logo" 
         class="fixed bottom-8 right-8 w-16 h-16 rounded-full opacity-75 hover:opacity-100 transition-opacity duration-300 z-40"
         onerror="this.onerror=null;this.src='https://placehold.co/64x64/4F46E5/FFFFFF?text=Logo';">

    <script>
        // Mobile menu toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close mobile menu on link click
        document.querySelectorAll('#mobile-menu a, nav a:not(#mobile-menu-button)').forEach(link => {
            link.addEventListener('click', () => {
                if (!link.href.includes('#')) return; // Don't close for external links
                setTimeout(() => {
                     mobileMenu.classList.add('hidden');
                }, 100)
            });
        });

        // --- GitHub API Fetch ---
        async function fetchGitHubRepos() {
            const repoContainer = document.getElementById('repo-container');
            const username = 'staledonuts';
            try {
                // Add a loading state
                repoContainer.innerHTML = `<p class="text-center text-gray-400 col-span-full">Loading repositories...</p>`;
                const response = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&direction=desc`);
                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }
                const repos = await response.json();
                
                repoContainer.innerHTML = ''; // Clear loading message

                if(repos.length === 0){
                    repoContainer.innerHTML = `<p class="text-center text-gray-400 col-span-full">No public repositories found for ${username}.</p>`;
                    return;
                }

                repos.forEach(repo => {
                    const repoCard = `
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="block bg-gray-800 p-6 rounded-lg hover:bg-gray-700 transition duration-300 ease-in-out shadow-lg transform hover:-translate-y-1 h-full flex flex-col">
                            <h3 class="font-bold text-xl text-indigo-400 mb-2">${repo.name}</h3>
                            <p class="text-gray-400 text-sm mb-4 flex-grow">${repo.description || 'No description available.'}</p>
                            <div class="flex justify-between items-center text-sm text-gray-500 mt-auto">
                                <span>${repo.language || 'N/A'}</span>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                    <span>${repo.stargazers_count}</span>
                                </div>
                            </div>
                        </a>
                    `;
                    repoContainer.innerHTML += repoCard;
                });

            } catch (error) {
                repoContainer.innerHTML = `<p class="text-center text-red-400 col-span-full">${error.message}. Could not load repositories.</p>`;
                console.error("Failed to fetch GitHub repos:", error);
            }
        }


        // --- Three.js Shader Scene ---
        let scene, camera, renderer, cube;
        const container = document.getElementById('shader-container');

        const vertexShader = `
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
        `;
        const fragmentShader = `
            varying vec2 vUv;
            uniform float u_time;
            void main() {
                gl_FragColor = vec4(
                    0.5 + 0.5 * cos(u_time + vUv.x * 5.0),
                    0.5 + 0.5 * sin(u_time + vUv.y * 5.0),
                    0.8,
                    1.0
                );
            }
        `;

        function initShaderScene() {
            if (!container) return;
            // Scene
            scene = new THREE.Scene();
            // Camera
            camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.z = 2;
            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);
            // Geometry and Material
            const geometry = new THREE.BoxGeometry(1, 1, 1);
            const material = new THREE.ShaderMaterial({
                uniforms: { u_time: { value: 0.0 } },
                vertexShader: vertexShader,
                fragmentShader: fragmentShader
            });
            // Mesh
            cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
            // Handle window resize
            window.addEventListener('resize', onWindowResize, false);
            // Start animation
            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            if (cube && cube.material.uniforms.u_time) {
               cube.material.uniforms.u_time.value += 0.02;
            }
            if(cube) {
                cube.rotation.x += 0.005;
                cube.rotation.y += 0.005;
            }
            if(renderer) {
                renderer.render(scene, camera);
            }
        }

        function onWindowResize() {
            if(camera && renderer && container) {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            }
        }
        
        // Wait for the page to be fully loaded to initialize everything
        window.onload = function() {
            if (document.getElementById('shader-container')) {
                 initShaderScene();
            }
            if (document.getElementById('repo-container')) {
                fetchGitHubRepos();
            }
        }
    </script>
</body>
</html>
